(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),o=n(15),a=n.n(o),u=n(3),i=n(4),s=function(e){var t=e.name,n=e.number,c=e.handleName,o=e.handleNum,a=e.handleAddPerson;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["Name: ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["Number: ",Object(r.jsx)("input",{value:n,onChange:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:a,children:"Add"})})]})})},d=function(e){var t=e.onChange;return Object(r.jsxs)("div",{children:["Filter the phonebook: ",Object(r.jsx)("input",{onChange:t})]})},j=function(e){var t=e.name,n=e.number,c=e.onDelete;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("span",{children:[t," ",n]}),Object(r.jsx)("button",{onClick:c,children:"Delete"}),Object(r.jsx)("br",{})]})},b=function(e){var t=e.filtered,n=e.persons,c=e.onDelete;return t.length>0?t.map((function(e){return Object(r.jsx)(j,{name:e.name,number:e.number,onDelete:c},e.name)})):n.map((function(e){return Object(r.jsx)(j,{name:e.name,number:e.number,onDelete:function(){return c(e.id,e.name)}},e.name)}))},l=n(5),h=n.n(l),m="/api/persons",f={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(e){return h.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return h.a.delete(m+"/"+e)},update:function(e){return h.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))}},O=function(e){var t=e.message;if(0===Object.keys(t).length)return null;var n={color:t.isError?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(r.jsx)("div",{style:n,children:t.text})},p=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(""),j=Object(i.a)(a,2),l=j[0],h=j[1],m=Object(c.useState)(""),p=Object(i.a)(m,2),x=p[0],v=p[1],g=Object(c.useState)([]),k=Object(i.a)(g,2),w=k[0],C=k[1],D=Object(c.useState)({}),y=Object(i.a)(D,2),E=y[0],A=y[1];Object(c.useEffect)((function(){f.getAll().then((function(e){o(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"PhoneBook"}),Object(r.jsx)(O,{message:E}),Object(r.jsx)(d,{onChange:function(e){var t=e.target.value;if(""!==t){var r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));C(r)}else C([])}}),Object(r.jsx)("h2",{children:"Add new person to the phonebook"}),Object(r.jsx)(s,{name:l,number:x,handleName:function(e){h(e.target.value)},handleNum:function(e){v(e.target.value)},handleAddPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===l}));if(t){if(window.confirm(t.name+" is already in the phonebook. Do you wish to update the phone number?")){var r=Object(u.a)(Object(u.a)({},t),{},{number:x});f.update(r).then((function(e){o(n.map((function(n){return n.id!==t.id?n:e}))),A(Object(u.a)(Object(u.a)({},E),{},{text:"".concat(t.name," phone number was updated"),isError:!1})),setTimeout((function(){A({})}),4e3)})).catch((function(e){A(Object(u.a)(Object(u.a)({},E),{},{text:"".concat(t.name," was already deleted from the server."),isError:!0})),setTimeout((function(){A({})}),4e3)}))}}else{var c={name:l,number:x};f.create(c).then((function(e){o(n.concat(e)),h(""),v(""),A(Object(u.a)(Object(u.a)({},E),{},{text:"Added ".concat(c.name," to the PhoneBook"),isError:!1})),setTimeout((function(){A({})}),4e3)})).catch((function(e){var t=e.response.data.error;A(Object(u.a)(Object(u.a)({},E),{},{text:"".concat(t),isError:!0}))}))}}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{filtered:w,persons:n,onDelete:function(e,t){window.confirm("Delete "+t+" ?")&&(f.remove(e),o(n.filter((function(t){return t.id!==e}))),A(Object(u.a)(Object(u.a)({},E),{},{text:"Removed ".concat(t," from the PhoneBook"),isError:!1})),setTimeout((function(){A({})}),4e3))}})]})};a.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2b45085f.chunk.js.map