[{"E:\\Documents\\Web Development\\fullstackopen_excercises\\osa2\\maiden_tiedot\\src\\index.js":"1","E:\\Documents\\Web Development\\fullstackopen_excercises\\osa2\\maiden_tiedot\\src\\App.js":"2"},{"size":153,"mtime":1611237744448,"results":"3","hashOfConfig":"4"},{"size":2948,"mtime":1611674716722,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"8"},"1mt2npe",{"filePath":"9","messages":"10","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"11"},"E:\\Documents\\Web Development\\fullstackopen_excercises\\osa2\\maiden_tiedot\\src\\index.js",[],["12","13"],"E:\\Documents\\Web Development\\fullstackopen_excercises\\osa2\\maiden_tiedot\\src\\App.js",["14"],"import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\n\nconst Countries = ({ countries, showCountry }) => {\n  return (\n    <div>\n      <ul style={{ listStyle: \"none\", padding:\"0px\"}}>\n        {countries.map(country => {\n          return (\n              <li key={country.name}>{country.name} <button onClick={() => showCountry(country)}>show</button></li>\n          )\n        })}\n        </ul>\n    </div>\n  )\n}\n\nconst Country = ({ country, weather }) => {\n  // console.log(country);\n  // console.log(weather);\n  return(\n    <div>\n      <h2>{country[0].name}</h2>\n        <span>Capital: {country[0].capital}</span>\n        <br></br>\n        <span>Population: {country[0].population}</span>\n      <h3>Spoken languages</h3>\n        <ul>\n          {country[0].languages.map(lang => {\n            return <li key={lang.name}>{lang.name}</li>\n          })}\n        </ul>\n      <img src={country[0].flag} style={{width:\"150px\"}} alt='Maan lippu' />\n      <h2>Weather in {country[0].name}</h2>\n          <p><strong>Temperature:</strong> {weather.temperature} Celcius</p>\n          <img src={weather.weather_icons} alt='Sään kuva' />\n          <p><strong>Wind:</strong> {weather.wind_speed} mph direction {weather.wind_dir}</p>\n    </div>\n  )\n}\n\n\nconst App = () => {\n  const [countries, setCountries] = useState([])\n  const [searchValue, setSearchValue] = useState('')\n  const [weather, setWeather] = useState([])\n  \n  const weather_api_key = process.env.REACT_APP_API_KEY\n\n  const handleSearchValue = (e) => {\n    setSearchValue(e.target.value)\n  }\n\n\n  // Kun tekstikentässä arvo muuttuu, axio hakee dataa api:lta\n  useEffect(() => {\n    if(searchValue !== '') {\n      axios\n      .get('https://restcountries.eu/rest/v2/name/' + searchValue)\n      .then(response => {\n        setCountries(response.data)\n      })\n    }\n  }, [searchValue])\n\n  // Kun countries tila muuttuu ja countries on listassa 1 kpl\n  // haetaan sään liittyvää dataa weatherstack:sta\n  useEffect(() => {\n    if (countries.length === 1) {\n      axios\n      .get(`http://api.weatherstack.com/current?access_key=${weather_api_key}&query=${countries[0].name}`)\n      .then(response => {\n        setWeather(response.data.current)\n      })\n    }\n  }, [countries])\n\n  const showCountry = (country) => {\n    // Kun nappi painetaan, muutetaan tekstikentän arvoksi maan nimi,\n    // tällöin useEffect suorittaa uuden haun ja näyttää valitun maan\n    setSearchValue(country.name)\n  }\n  \n\n  return (\n    <div>\n      <h2>Maiden tiedot</h2>\n      Search countries: <input value={searchValue} onChange={handleSearchValue} />\n      <div>\n        {countries.length === 1 ? <Country country={countries} weather={weather} /> \n        : (countries.length < 10 && countries.length >= 1) \n        ? <Countries countries={countries} showCountry={showCountry}/> \n        : <p>Too many matches, specify another filter</p> }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n",{"ruleId":"15","replacedBy":"16"},{"ruleId":"17","replacedBy":"18"},{"ruleId":"19","severity":1,"message":"20","line":77,"column":6,"nodeType":"21","endLine":77,"endColumn":17,"suggestions":"22"},"no-native-reassign",["23"],"no-negated-in-lhs",["24"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'weather_api_key'. Either include it or remove the dependency array.","ArrayExpression",["25"],"no-global-assign","no-unsafe-negation",{"desc":"26","fix":"27"},"Update the dependencies array to be: [countries, weather_api_key]",{"range":"28","text":"29"},[2228,2239],"[countries, weather_api_key]"]